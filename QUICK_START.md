# 自动交易机器人 - 快速入门

## 该机器人的功能

自动交易 Polymarket 预测市场，从软件价格预言机和实际市场价格之间的价格差异中获利。

## 如何运行

### 1. 安装依赖
```bash
cd polymarket-ts-bot
npm install
```

### 2. 配置环境
编辑 `.env` 文件：
```env
PRIVATE_KEY=0xYourPrivateKeyHere
SOFTWARE_WS_URL=ws://45.130.166.119:5001
PRICE_DIFFERENCE_THRESHOLD=0.015
STOP_LOSS_AMOUNT=0.005
TAKE_PROFIT_AMOUNT=0.01
DEFAULT_TRADE_AMOUNT=5.0
TRADE_COOLDOWN=30
```

### 3. 生成凭证
```bash
npm run gen-creds
```

### 4. 启动自动交易
```bash
npm run auto-trade
```

## 运行时发生的事情

```
1. 机器人连接到软件价格预言机（WebSocket）
2. 机器人连接到 Polymarket 价格源（WebSocket）
3. 机器人持续监控价格差异
4. 当检测到机会时（差异 > $0.015）：
   → 立即下买单
   → 下止盈卖单（+$0.01）
   → 下止损卖单（-$0.005）
5. 每 30 秒重复一次（冷却时间）
```

## 示例输出

```
启动自动交易机器人...
钱包：0xda2d...b263
查找当前比特币市场...
找到市场：Bitcoin Up or Down - November 22, 9AM ET
上涨代币：74767151816109143033...
下跌代币：24201538121789638558...
软件 WebSocket 已连接
Polymarket WebSocket 已连接
机器人成功启动！

🎯 检测到交易机会！
代币：上涨
软件价格：$0.7500
Polymarket 价格：$0.7300
差额：$0.0200

📊 执行交易...
以 $0.7300 购买 6.8493 份额
✅ 买单已下：abc123...
✅ 止盈单已下，价格 $0.7400
✅ 止损单已下，价格 $0.7250
✅ 交易执行完成！
```

## 风险管理

| 风险级别 | 交易金额 | 止损 | 止盈 |
|---------|---------|------|------|
| 保守 | $5 | $0.005 | $0.01 |
| 中等 | $10 | $0.01 | $0.02 |
| 激进 | $20 | $0.02 | $0.04 |

**建议**：第一周从保守型（$5 交易）开始。

## 停止机器人

按 `Ctrl+C` 优雅地停止机器人。

## 创建的文件

- `.credentials.json` - 您的 API 凭证（git 忽略）
- 控制台输出中的交易日志

## 故障排除

### "未找到私钥"
→ 将您的私钥添加到 `.env` 文件

### "未找到活跃的比特币市场"
→ 机器人在比特币小时市场上运行。等待下一个小时。

### "余额不足"
→ 在 Polygon 网络上为钱包充值 USDC

### "连接失败"
→ 检查互联网连接和防火墙设置

## 性能跟踪

监控这些指标：
- **胜率**：目标 60-70%
- **平均利润**：目标每笔交易 $0.01+
- **每日利润**：目标 $1-5+（使用 $5 交易）

## 安全功能

✅ 止损防止大额损失
✅ 止盈自动锁定收益
✅ 冷却时间防止过度交易
✅ 阈值过滤小机会
✅ 断线时自动重连

## 下一步

1. 使用 $5 交易运行机器人 24 小时
2. 跟踪结果（获胜 vs 失败）
3. 如果 20+ 笔交易后盈利，考虑扩大规模
4. 阅读 `PROFIT_STRATEGY.md` 了解详细策略解释

## 支持

如有问题或疑问：
- 查看 `PROFIT_STRATEGY.md` 了解策略细节
- 查看 `CREDENTIALS_GUIDE.md` 了解凭证问题
- 查看 `README.md` 了解完整文档

