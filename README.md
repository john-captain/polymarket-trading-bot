# Polymarket TypeScript äº¤æ˜“æœºå™¨äºº

ä¸€ä¸ªä¸“ä¸šçš„åŸºäº TypeScript çš„ Polymarket äº¤æ˜“æœºå™¨äººï¼Œå…·æœ‰å®Œæ•´çš„å‡­è¯ç®¡ç†ã€è®¢å•æ‰§è¡Œã€å¸‚åœºåˆ†æå’Œ**è‡ªåŠ¨åŒ–å¥—åˆ©äº¤æ˜“**åŠŸèƒ½ã€‚

æ­£å¼åŸŸåï¼šhttp://polymarket.wukongbc.com/
æµ‹è¯•åŸŸåï¼šhttp://poldev.wukongbc.com/

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” **å‡­è¯ç®¡ç†**ï¼šå®‰å…¨çš„ç§é’¥å¤„ç†å’Œ API èº«ä»½éªŒè¯
- ğŸ’° **æˆæƒé¢åº¦æ§åˆ¶**ï¼šç®¡ç†ç”¨äºäº¤æ˜“çš„ USDC ä»£å¸æˆæƒé¢åº¦
- ğŸ“Š **å¸‚åœºåˆ†æ**ï¼šå®æ—¶ä¹°å–ä»·å·®å’Œä»·æ ¼æ•°æ®
- ğŸ¯ **è®¢å•æ‰§è¡Œ**ï¼šä¸‹å¸‚ä»·å•å’Œé™ä»·å•
- ğŸ” **å¸‚åœºå‘ç°**ï¼šè‡ªåŠ¨æ£€æµ‹å½“å‰æ¯”ç‰¹å¸å¸‚åœº
- ğŸ“ˆ **ä»·æ ¼è·Ÿè¸ª**ï¼šä»è®¢å•ç°¿è·å–å®æ—¶ä»·æ ¼æ›´æ–°
- ğŸ¤– **è‡ªåŠ¨äº¤æ˜“æœºå™¨äºº**ï¼šå¸¦é£é™©ç®¡ç†çš„è‡ªåŠ¨åŒ–å¥—åˆ©äº¤æ˜“
![Screenshot](./run.png)

![Screenshot](./tx.png)
## ä¸¤ç§æ“ä½œæ¨¡å¼

### 1. æ‰‹åŠ¨äº¤æ˜“ï¼ˆäº¤äº’å¼ CLIï¼‰
ä½¿ç”¨äº¤äº’å¼èœå•æ‰‹åŠ¨ä¸‹å•ã€æŸ¥çœ‹ä»·æ ¼å’Œç®¡ç†æ‚¨çš„è´¦æˆ·ã€‚

### 2. è‡ªåŠ¨åŒ–äº¤æ˜“æœºå™¨äºº
å…¨è‡ªåŠ¨æœºå™¨äººï¼š
- ç›‘æ§è½¯ä»¶é¢„è¨€æœºä¸å¸‚åœºä¹‹é—´çš„ä»·æ ¼å·®å¼‚
- åœ¨æ£€æµ‹åˆ°ç›ˆåˆ©æœºä¼šæ—¶æ‰§è¡Œäº¤æ˜“
- è‡ªåŠ¨è®¾ç½®æ­¢ç›ˆå’Œæ­¢æŸè®¢å•
- ä½¿ç”¨å¯é…ç½®å‚æ•°ç®¡ç†é£é™©

## å®‰è£…

```bash
# å®‰è£…ä¾èµ–
npm install

# åˆ›å»º .env æ–‡ä»¶
# ç¼–è¾‘æ‚¨çš„ç§é’¥å’Œé…ç½®
```

## é…ç½®

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
PRIVATE_KEY=your_private_key_here
CLOB_API_URL=https://clob.polymarket.com
POLYGON_CHAIN_ID=137

# è‡ªåŠ¨äº¤æ˜“å‚æ•°
SOFTWARE_WS_URL=ws://45.130.166.119:5001
PRICE_DIFFERENCE_THRESHOLD=0.015
STOP_LOSS_AMOUNT=0.005
TAKE_PROFIT_AMOUNT=0.01
DEFAULT_TRADE_AMOUNT=5.0
TRADE_COOLDOWN=30
```

## ä½¿ç”¨æ–¹æ³•

### ç”Ÿæˆ CLOB å‡­è¯ï¼ˆé¦–æ¬¡è®¾ç½®ï¼‰

```bash
npm run gen-creds
```

### è¿è¡Œè‡ªåŠ¨äº¤æ˜“æœºå™¨äºº

```bash
npm run auto-trade
```

è¿™å°†å¯åŠ¨å…¨è‡ªåŠ¨å¥—åˆ©äº¤æ˜“æœºå™¨äººã€‚æŸ¥çœ‹ `PROFIT_STRATEGY.md` äº†è§£äº¤æ˜“é€»è¾‘çš„è¯¦ç»†è§£é‡Šã€‚

### è¿è¡Œæ‰‹åŠ¨äº¤äº’å¼æœºå™¨äºº

```bash
npm run dev
```

### å•ç‹¬è„šæœ¬

```bash
# æ£€æŸ¥å‡­è¯
npm run credentials

# æ£€æŸ¥é’±åŒ…ä½™é¢
npm run check-balance

# æ£€æŸ¥æˆæƒé¢åº¦
npm run allowance

# æŸ¥æ‰¾å½“å‰æ¯”ç‰¹å¸å¸‚åœº
npm run market

# è·å–ä¹°å–ä»·æ ¼ï¼ˆéœ€è¦Token ID ä½œä¸ºå‚æ•°ï¼‰
npm run bid-ask <token_id>

# ä¸‹å•ï¼ˆäº¤äº’å¼ï¼‰
npm run order
```

### ç”Ÿäº§ç¯å¢ƒæ„å»º

```bash
# ç¼–è¯‘ TypeScript
npm run build

# è¿è¡Œç¼–è¯‘åçš„ç‰ˆæœ¬
npm start
```

## é¡¹ç›®ç»“æ„

```
polymarket-ts-bot/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts                  # äº¤äº’å¼ CLI äº¤æ˜“ç•Œé¢
â”‚   â”œâ”€â”€ auto_trading_bot.ts      # è‡ªåŠ¨åŒ–å¥—åˆ©æœºå™¨äºº
â”‚   â”œâ”€â”€ _gen_credential.ts       # å‡­è¯ç®¡ç†
â”‚   â”œâ”€â”€ allowance.ts             # ä»£å¸æˆæƒé¢åº¦ç®¡ç†
â”‚   â”œâ”€â”€ bid_asker.ts             # ä¹°å–ä»·æ ¼è·å–
â”‚   â”œâ”€â”€ market_order.ts          # è®¢å•æ‰§è¡Œ
â”‚   â”œâ”€â”€ market_finder.ts         # å¸‚åœºå‘ç°
â”‚   â””â”€â”€ generate_credentials.ts  # å‡­è¯ç”Ÿæˆå·¥å…·
â”œâ”€â”€ .env                         # ç¯å¢ƒå˜é‡ï¼ˆç§æœ‰ï¼‰
â”œâ”€â”€ .credentials.json            # ç”Ÿæˆçš„ API å‡­è¯
â”œâ”€â”€ package.json                 # ä¾èµ–å’Œè„šæœ¬
â”œâ”€â”€ PROFIT_STRATEGY.md          # è¯¦ç»†äº¤æ˜“ç­–ç•¥æŒ‡å—
â””â”€â”€ CREDENTIALS_GUIDE.md        # å¦‚ä½•ç”Ÿæˆå‡­è¯
```

## è‡ªåŠ¨äº¤æ˜“æœºå™¨äººé€»è¾‘

è‡ªåŠ¨åŒ–æœºå™¨äººå®ç°ä»·æ ¼å¥—åˆ©ç­–ç•¥ï¼š

1. **ä»·æ ¼ç›‘æ§**ï¼šæ¯”è¾ƒè½¯ä»¶é¢„è¨€æœºä»·æ ¼ä¸ Polymarket å¸‚åœºä»·æ ¼
2. **æœºä¼šæ£€æµ‹**ï¼šå½“ä»·æ ¼å·®å¼‚è¶…è¿‡é˜ˆå€¼æ—¶è§¦å‘äº¤æ˜“
3. **ä¸‰å•æ‰§è¡Œ**ï¼š
   - å¸‚ä»·ä¹°å…¥ï¼šä»¥å½“å‰ä»·æ ¼è´­ä¹°ä»£å¸
   - é™ä»·æ­¢ç›ˆå–å‡ºï¼šå½“ä»·æ ¼ä¸Šæ¶¨æ—¶å–å‡º
   - é™ä»·æ­¢æŸå–å‡ºï¼šå½“ä»·æ ¼ä¸‹è·Œæ—¶å–å‡º
4. **é£é™©ç®¡ç†**ï¼šå¯é…ç½®çš„æ­¢æŸå’Œæ­¢ç›ˆæ°´å¹³

**é˜…è¯» `PROFIT_STRATEGY.md` äº†è§£æœºå™¨äººå¦‚ä½•ç›ˆåˆ©çš„å®Œæ•´è§£é‡Šã€‚**

## äº¤æ˜“ç­–ç•¥æ¦‚è§ˆ

### å·¥ä½œåŸç†

```
è½¯ä»¶é¢„è¨€æœºè®¡ç®—ä¸Šæ¶¨ä»£å¸ä»·å€¼ï¼š$0.75
å¸‚åœºä»¥ $0.70 å‡ºå”®ä¸Šæ¶¨ä»£å¸
å·®é¢ï¼š$0.05ï¼ˆé«˜äº $0.015 é˜ˆå€¼ï¼‰

æœºå™¨äººæ‰§è¡Œï¼š
1. ä¹°å…¥ @ $0.70ï¼ˆå¸‚ä»·å•ï¼‰
2. å–å‡º @ $0.71ï¼ˆæ­¢ç›ˆ +$0.01ï¼‰
3. å–å‡º @ $0.695ï¼ˆæ­¢æŸ -$0.005ï¼‰

é¢„æœŸç»“æœï¼š
- 70% æ¦‚ç‡ï¼šæ­¢ç›ˆæˆäº¤ â†’ +$0.01 åˆ©æ¶¦
- 30% æ¦‚ç‡ï¼šæ­¢æŸæˆäº¤ â†’ -$0.005 æŸå¤±
- å‡€æœŸæœ›ï¼šæ­£å€¼
```

### é…ç½®å‚æ•°

| å‚æ•° | é»˜è®¤å€¼ | æè¿° |
|------|--------|------|
| PRICE_DIFFERENCE_THRESHOLD | 0.015 | è§¦å‘äº¤æ˜“çš„æœ€å°ä»·æ ¼å·®å¼‚ |
| TAKE_PROFIT_AMOUNT | 0.01 | é«˜äºä¹°å…¥ä»·çš„åˆ©æ¶¦ç›®æ ‡ |
| STOP_LOSS_AMOUNT | 0.005 | ä½äºä¹°å…¥ä»·çš„æœ€å¤§æŸå¤± |
| DEFAULT_TRADE_AMOUNT | 5.0 | æ¯ç¬”äº¤æ˜“çš„ USDC é‡‘é¢ |
| TRADE_COOLDOWN | 30 | äº¤æ˜“ä¹‹é—´çš„ç§’æ•° |

## æ¨¡å—

### 1. å‡­è¯ç”Ÿæˆå™¨ï¼ˆ`_gen_credential.ts`ï¼‰

ç®¡ç†é’±åŒ…å‡­è¯å’Œ API èº«ä»½éªŒè¯ã€‚

```typescript
import { CredentialGenerator } from './_gen_credential';

const generator = new CredentialGenerator();
generator.displayInfo();
```

### 2. æˆæƒé¢åº¦ç®¡ç†å™¨ï¼ˆ`allowance.ts`ï¼‰

æ§åˆ¶ç”¨äºäº¤æ˜“çš„ USDC ä»£å¸æˆæƒé¢åº¦ã€‚

```typescript
import { AllowanceManager } from './allowance';

const manager = new AllowanceManager();
await manager.checkAllowance();
await manager.setAllowance('1000'); // è®¾ç½® 1000 USDC æˆæƒé¢åº¦
```

### 3. ä¹°å–ä»·æ ¼è·å–å™¨ï¼ˆ`bid_asker.ts`ï¼‰

è·å–å®æ—¶è®¢å•ç°¿æ•°æ®ã€‚

```typescript
import { BidAsker } from './bid_asker';

const bidAsker = new BidAsker();
const data = await bidAsker.getPriceData(tokenId);
console.log(data.bidAsk.midpoint);
```

### 4. å¸‚ä»·å•æ‰§è¡Œå™¨ï¼ˆ`market_order.ts`ï¼‰

ä¸‹å•å’Œç®¡ç†è®¢å•ã€‚

```typescript
import { MarketOrderExecutor } from './market_order';

const executor = new MarketOrderExecutor();
await executor.placeMarketOrder({
    tokenId: 'TOKEN_ID',
    side: 'BUY',
    amount: 10 // 10 USDC
});
```

### 5. å¸‚åœºæŸ¥æ‰¾å™¨ï¼ˆ`market_finder.ts`ï¼‰

è‡ªåŠ¨æ£€æµ‹å’Œæœç´¢å¸‚åœºã€‚

```typescript
import { MarketFinder } from './market_finder';

const finder = new MarketFinder();
const market = await finder.findCurrentBitcoinMarket();
console.log(market.tokens); // ä¸Šæ¶¨å’Œä¸‹è·Œä»£å¸
```

## å®‰å…¨åŠŸèƒ½

- âœ… ä¸‹å•å‰çš„ç¡®è®¤æç¤º
- âœ… ä»·æ ¼éªŒè¯å’Œåˆç†æ€§æ£€æŸ¥
- âœ… è‡ªåŠ¨å¸‚åœºä»·æ ¼ç¼“å†²
- âœ… ç§é’¥ä»ä¸åœ¨æ—¥å¿—ä¸­æš´éœ²
- âœ… é”™è¯¯å¤„ç†å’Œæ¢å¤

## å¼€å‘

```bash
start-bot.ps1

```bash
# ç›‘è§†æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡è½½ï¼‰
npm run dev

# ç±»å‹æ£€æŸ¥
npx tsc --noEmit

# ä»£ç æ£€æŸ¥
npx eslint src/
```

## å®‰å…¨æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦ï¼š**
- åˆ‡å‹¿æäº¤æ‚¨çš„ `.env` æ–‡ä»¶
- ä¿æŠ¤å¥½æ‚¨çš„ç§é’¥
- é¦–å…ˆä½¿ç”¨å°é¢æµ‹è¯•
- åœ¨ç¡®è®¤å‰å®¡æŸ¥æ‰€æœ‰äº¤æ˜“

## ä¾èµ–

- `@polymarket/clob-client` - å®˜æ–¹ Polymarket CLOB å®¢æˆ·ç«¯
- `ethers` - ä»¥å¤ªåŠé’±åŒ…å’ŒåŠ å¯†
- `axios` - HTTP è¯·æ±‚
- `dotenv` - ç¯å¢ƒå˜é‡ç®¡ç†
- `typescript` - ç±»å‹å®‰å…¨å’Œç°ä»£ JavaScript

## è®¸å¯è¯

ISC

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–ç–‘é—®ï¼Œè¯·å‚è€ƒï¼š
- [Polymarket æ–‡æ¡£](https://docs.polymarket.com)
- [CLOB API æ–‡æ¡£](https://docs.polymarket.com/#clob-api)

---

**å…è´£å£°æ˜**ï¼šä½¿ç”¨é£é™©è‡ªè´Ÿã€‚æœ¬è½¯ä»¶æŒ‰åŸæ ·æä¾›ï¼Œä¸æä¾›ä»»ä½•ä¿è¯ã€‚å§‹ç»ˆå…ˆç”¨å°é¢æµ‹è¯•ã€‚
