# Polymarket 做市套利策略说明文档（含原理 + 接口调用说明）

## 一、策略原理说明

### 1. 核心定位：做市商策略（Market Making）

你在 Polymarket 扮演的是"做市商"，不是赌方向的人。\
目标是：**不预测行情，仅靠买卖价差（Spread）赚钱**。

交易本质：\
- YES/NO 代币价格始终满足：YES + NO ≈ 1 USDC\
- 当前价格只是反映市场对事件概率的预估\
- 做市商在两侧挂单，通过"低买高卖"赚取差价

### 2. 策略核心逻辑（非常重要）

#### （1）计算中间价 midPrice

从订单簿获取： - bestBid = 当前市场最高买价\
- bestAsk = 当前市场最低卖价

中间价：

    mid = (bestBid + bestAsk) / 2

#### （2）确定价差 Spread

例如设置：\
- spread = 2% （你的机器人可根据市场动态调整）

你的目标不是预测涨跌，而是：\
- mid×(1 - 1%) 挂买单\
- mid×(1 + 1%) 挂卖单

#### （3）挂单方式

在 YES 和 NO 双边挂单：

    买单：低于中间价一点  
    卖单：高于中间价一点  

当买单成交 → 卖单成交，即完成一个"做市循环"，获得价差收益。

#### （4）库存管理（Inventory Risk）

因为你不预测方向，所以必须控制持仓风险。

情况示例：\
- 买了很多 YES，但卖不出去\
→ 你就成了 YES 的"赌徒"，而不是做市商。

解决方式（机器人要实现）：

##### 方法 A：偏斜报价（Skew）

仓位偏向 YES ：\
- 将 YES 的买价调低\
- YES 的卖价调高

让别人来接你的 YES。

##### 方法 B：Merge

如果你持有： - YES = x\
- NO = x

你可以执行：

    mergePositions → 得到 x USDC

这是 Polymarket 的"赎回机制"，无风险释放资金。

### 5. 为什么能赚钱？

做市策略的盈利源头只有两个：

#### （1）价差 Spread

完成一次循环赚：

    profit = spread × orderSize

#### （2）交易频率（最关键）

你一次赚几分钱无所谓，只要频率高，就能变成稳定收益。



------------------------------------------------------------------------

## 三、机器人必须实现的模块

### （1）行情数据实时获取

-   调用 Polymarket API 获取 bid/ask\
-   计算 mid

### （2）自动挂单

-   买单与卖单\
-   根据 spread 调整偏移

### （3）订单成交监听

-   订单部分成交
-   全部成交

### （4）库存管理（非常重要）

策略是否活得久，全靠这块：

-   检查 YES/NO 持仓比例\
-   进行 skew 调整\
-   判断需不需要 merge

### （5）风险控制

-   限制单方向最大仓位
-   限制最大滑点
-   限制最大 daily loss（止损）

------------------------------------------------------------------------

# 四、Polymarket API 接口调用说明（机器人使用）

以下为实际机器人要调用的关键接口说明

------------------------------------------------------------------------

# 1. 获取市场列表

    GET https://clob.polymarket.com/markets

返回内容：市场 id、状态、当前价格等。

------------------------------------------------------------------------

# 2. 获取某市场订单簿（关键）

    GET https://clob.polymarket.com/orderbook/{marketId}

返回： - bids：买单列表 - asks：卖单列表

你机器人需要从这里读取： - bestBid - bestAsk

------------------------------------------------------------------------

# 3. 下单接口（Buy / Sell）

    POST https://clob.polymarket.com/orders

请求体关键字段：

    market: 市场ID
    type: limit
    side: buy / sell
    price: 挂单价格
    size: 订单量

返回订单 ID。

------------------------------------------------------------------------

# 4. 查看订单状态

    GET https://clob.polymarket.com/orders/{orderId}

可判断： - open - partially-filled - filled - cancelled

------------------------------------------------------------------------

# 5. 取消订单

    DELETE https://clob.polymarket.com/orders/{orderId}

做市策略必须频繁刷新订单，所以取消订单是常用操作。

------------------------------------------------------------------------

# 6. 查询持仓（仓位管理）

    GET https://clob.polymarket.com/portfolio

返回你持有的： - YES 数量 - NO 数量 - USDC

机器人需基于此做： - skew 调整 - merge 判断

------------------------------------------------------------------------

# 7. mergePositions（赎回机制）

    POST https://clob.polymarket.com/merge

当你 YES 和 NO 数量相等时，可执行： - YES x + NO x → 得 x USDC

用于释放资金，防止仓位堆积。

------------------------------------------------------------------------

# 五、完整机器人任务流程

1.  **获取订单簿（核心数据）**
2.  **计算 midPrice**
3.  **根据设置 spread 计算双边挂单价格**
4.  **检查是否已有旧订单 → 取消**
5.  **重新挂买单、卖单**
6.  **监听成交事件**
7.  **若仓位失衡 → 执行 skew 调整**
8.  **若 YES=NO \> 0 → 执行 merge**
9.  **风险控制：仓位过大则削减挂单量**
10. **重复循环，每 2-5 秒执行一次**

------------------------------------------------------------------------

